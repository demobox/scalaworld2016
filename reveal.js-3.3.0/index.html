<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Essential vs. Accidental Complexity in Scala &amp; Dotty: Towards a Puzzler-free Future?</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/vs.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
        <section data-markdown>
          <script type="text/template">
          ## Essential vs. Accidental Complexity in Scala &amp; Dotty
          
          #### Towards a Puzzler-free Future? <!-- .element: class="fragment" -->
          </script>
        </section>
				<section>
          What is this all about?
        </section>
        <section>
          <section>
            <p>Scala has lots of flexible features
             <span class="fragment"> and attempts to combine many
             powerful ideas</span></p>
            <p class="fragment">With great power comes great
            <strike>respons</strike>ability to shoot oneself in the 
            foot</p>
          </section>
          <section data-markdown>
            <script type="text/template">
```
val numbers = List("1", "2").toSet() + "3"
println(numbers) // "false3"
```
             </script>
          </section>
        </section>
				<section>
          <p>Today is not about head-scratching puzzles</p>
          <p class="fragment shrink">(Although we may sneak the odd one
          in here or there)</p>
        </section>
				<section>
          <p>Instead, we'd like to examine:</p>
          <p class="fragment"><span class="fragment highlight-blue">
          <em>What can we learn from these puzzlers?</em></span></p>
          <p class="fragment"><span class="fragment highlight-blue">
          <em>Are there any interesting groups or clusters we can detect?
          </em></span></p>
          <p class="fragment"><span class="fragment highlight-blue">
          <em>What does that say about the language?</em></span></p>
        </section>
				<section>
          <p>Specifically: Which of these puzzlers are the result of
          essential vs. accidental complexity in the language?</p>
          <p class="fragment">And: Which, if any, might we be able to
          eliminate in future?</p>
        </section>
        <section>
          <section>
            The end of Scala Puzzlers?
          </section>
          <section>
            <p>Don't worry, we're ready ;-)</p>
            <p class="fragment highlight-red grow">http://dottypuzzlers.com</p>
          </section>
        </section>
        <section data-markdown>
          <script type="text/template">
          ### "Essential vs. Accidental Complexity"<span class="fragment">...quoi?</span>
          </script>
        </section>
        <section>
          <p>Ideally, we would like to have our cake and eat it too:</p>
          <p class="fragment">We would like a language that is expressive, elegant <em>and</em> avoids counterintuitive behaviour</p>
        </section>
        <section>
          <p>Is this possible?
          <p class="fragment">Or is it inevitable that, in a language
          with sufficient expressive power and a non-trivial feature set,
          <p class="fragment">there will always be interactions that 
          result in behaviour that the developer does not expect?</p>
        </section>
        <section>
          <p>Perhaps it makes more sense to talk about which areas of
          complexity are an unavoidable price to pay for the power a
          language offers...</p>
          <p class="fragment">...as compared to &quot;weirdness&quot;
          that is purely a result of specification or implementation
          quirks</p>
          <p class="fragment">...or of features that, in hindsight, 
          caused more problems than they were worth</p>
        </section>
        <section>
          <p>TL;DR</p>
          <p class="fragment"><span class="fragment highlight-blue">
          Essential complexity:</span> counterintuitive behaviour that
          is an (almost) inevitable result of the interaction of
          desirable language features</p>
          <p class="fragment"><span class="fragment highlight-red">
          Accidental complexity:</span> surprising behaviour that results
          from implementation quirks, specification &quot;grey
          areas&quot;, or language features that are no longer considered
          relevant</p>
        </section>
        <section data-markdown>
          <script type="text/template">
          ### Time for some <span class="fragment">(Semi-)</span>science
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
          #### A "Puzzler Cluster Analysis"
          
          n = 66 puzzlers
          </script>
        </section>
				<section>
          <p>Object-orientation</p>
          <p class="fragment">JVM &amp; Java compatibility</p>
          <p class="fragment">Conciseness &amp; syntax sugar</p>
          <p class="fragment">First-class functions</p>
          <p class="fragment">Collections</p>
        </section>
        <section data-markdown>
          <!-- Now You See Me, Now You Don't -->
          <script type="text/template">
```
trait A {
  val foo: Int
  val bar = 10
  println("In A: foo: " + foo + ", bar: " + bar)
}

class B extends A {
  val foo: Int = 25
  println("In B: foo: " + foo + ", bar: " + bar)
}

class C extends B {
  override val bar = 99
  println("In C: foo: " + foo + ", bar: " + bar)
}

new C
```
          </script>
        </section>
        <section data-markdown>
          <!-- Information Overload -->
          <script type="text/template">
```
object Oh {
  def overloadA(u: Unit) = "I accept a Unit"
  def overloadA(u: Unit, n: Nothing) =
  "I accept a Unit and Nothing"
  def overloadB(n: Unit) = "I accept a Unit"
  def overloadB(n: Nothing) = "I accept Nothing"
}
println(Oh overloadA 99)
println(Oh overloadB 99)
```
          </script>
        </section>
        <section data-markdown>
          <!-- Pick an Int, Any Int! -->
          <script type="text/template">
```
class A {
  type X // equivalent to X <: Any
  var x: X = _
}
class B extends A {
  type X = Int
}
val b = new B
println(b.x)
val bX = b.x
println(bX)
```
          </script>
        </section>
        <section data-markdown>
          <!-- Cast Away -->
          <script type="text/template">
```
import collection.JavaConverters._
def fromJava: java.util.Map[String, java.lang.Integer] = {
  val map = new java.util.HashMap[String, java.lang.Integer]()
  map.put("key", null)
  map
}

// watch out here...Integer is not Int!
val map = fromJava.asScala.
  asInstanceOf[scala.collection.Map[String, Int]]
println(map("key") == null)
println(map("key") == 0)
```
          </script>
        </section>
        <section data-markdown>
          <!-- Init You, Init Me -->
          <script type="text/template">
```
object XY {
  object X {
    val value: Int = Y.value + 1
  }
  object Y {
    val value: Int = X.value + 1
  }
}

println(if (math.random > 0.5) XY.X.value else XY.Y.value)
```
          </script>
        </section>
        <section data-markdown>
          <!-- Stringy Conversions -->
          <script type="text/template">
```
class A {
  implicit val stringToInt = (_: String).toInt
  println("4" - 2)
}
class B {
  implicit val stringToInt: String => Int = _.toInt
  println("4" - 2)
}
new A()
new B()
```
          </script>
        </section>
        <section data-markdown>
          <!-- Repeat After Me -->
          <script type="text/template">
```
import language.implicitConversions
trait RenderContext extends (StringContext => (Seq[Any] => String))

implicit class MyCtxHelper(val sc: StringContext) extends AnyVal {
  def my(args: Any*)(implicit rc: RenderContext) = 
    rc(sc).apply(args)
}

val name = "Scala"
val greeting = "I like your dots"

{
  implicit val useS =
    new RenderContext { def apply(sc: StringContext) = sc.s _ }
  println(my"Hello $name,\n$greeting!")
}

{
  implicit val useSAgain =
    new RenderContext { def apply(sc: StringContext) = sc.s(_) }
  println(my"Hello $name,\n$greeting!")
}
```
          </script>
        </section>
        <section data-markdown>
          <!-- Applied Values -->
          <script type="text/template">
```
object TheAnswer extends (() => Any) {
  override val apply = () => 42
}
object TheVariableAnswer extends (() => Any) {
  override val apply = () => 42
  def apply(n: Int) = 42 * n
}

TheAnswer()
TheVariableAnswer()
```
          </script>
        </section>
        <section data-markdown>
          <!-- A Listful of Dollars -->
          <script type="text/template">
```
type Dollar = Int
final val Dollar: Dollar = 1
val a: List[Dollar] = List(1, 2, 3)

println(a map { a: Int => Dollar })
println(a.map(a: Int => Dollar))
```
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
          ### Enter Dotty</span>
          </script>
        </section>
        <section>
          TODO
        </section>
        <section data-markdown>
          <script type="text/template">
          ### What can I do today?</span>
          </script>
        </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				progress: false,
				transition: 'fade',
				transitionSpeed: 'default',

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
